参照isg-credential-services脚本包，进行isg-adb-server服务管理脚本包设计，分别设计和创建每个脚本文件，以下是基本要求：

## 整体要求
# isg-adb-server 服务管理脚本包设计

**Service ID:** `isg-adb-server`

---

## 脚本文件清单及功能说明

| 脚本名           | 功能描述                               |
| ---------------- | -------------------------------------- |
| `common_paths.sh` | 统一路径定义                        |
| `install.sh`     | 安装android-tools,并配置 isg-adb-server 服务同时启动adb server|
| `start.sh`       | 启动 isg-adb-server（连接adb）  |
| `stop.sh`        | 停止 isg-adb-server（断开adb）  |
| `status.sh`      | 查询 adb server 运行状态（基于 5555 端口） |
| `uninstall.sh`   | 卸载 android-tools         |
| `autocheck.sh`   | 单服务自检与性能监控（确认 adb 服务可连接） |

---

## 操作命令及管理规范

### 1. 在 `isgservicemonitor` 下启停命令

| 操作     | 命令                                                                                 |
| -------- | ------------------------------------------------------------------------------------ |
| 启动     | `echo u > /data/data/com.termux/files/usr/var/service/isg-adb-server/supervise/control` |
| 停止     | `echo d > /data/data/com.termux/files/usr/var/service/isg-adb-server/supervise/control` |
| 禁用自启动 | `touch /data/data/com.termux/files/usr/var/service/isg-adb-server/down`                |
| 启用自启动 | `rm -f /data/data/com.termux/files/usr/var/service/isg-adb-server/down`                |

---

### 2. 安装服务

⬆️ **安装 isg-adb-server**

```bash
pkg update
pkg install -y android-tools
su
setprop service.adb.tcp.port 5555
stop adbd
start adbd
exit
adb connect 127.0.0.1:5555
```

---

### 3. 注册 servicemonitor 服务看护

```bash
log "registering servicemonitor service"

# 创建服务目录
mkdir -p "$SERVICE_CONTROL_DIR"

# 写入 run 启动脚本
cat << 'EOF' > "$RUN_FILE"
#!/data/data/com.termux/files/usr/bin/sh
# 启动 isg-adb-server
adb connect 127.0.0.1:5555
EOF

chmod +x "$RUN_FILE"
touch "$DOWN_FILE"   # 初始状态不自启
```

---


### 4. MQTT上报
BASE_DIR="/data/data/com.termux/files/home/servicemanager"
CONFIG_FILE="$BASE_DIR/configuration.yaml"
MQTT broker信息来自于CONFIG_FILE里的mqtt

---

### 5. 路径定义
common_paths.sh 仅仅是统一路径定义的规范
不要加载统一路径定义，每个脚本使用独立参数，无需依赖common_paths.sh

### 6. autocheck要求
服务状态（运行中/未运行）
服务端口

### 7. 状态查询要求
bash status.sh, 只输出running/stopped
通过pkg show android-tools，查看version来确定程序是否安装，增加mqtt状态上报，install：true/false
bash status.sh --json 输出详细json内容

### 8. 卸载
pkg uninstall android-tools，卸载android-tools

### 9. 其它要求
关键步骤加上中文注释
Termux 专用的临时目录：
  - TERMUX_TMP_DIR="/data/data/com.termux/files/usr/tmp"
  - TEMP_DIR="$TERMUX_TMP_DIR/${SERVICE_ID}_temp"
