
参照zigbee2mqtt脚本包，设计全套webssh脚本包，包括：install.sh，start.sh，stop.sh，status.sh，update.sh，uninstall.sh，autocheck.sh
service id: webssh
脚本功能
install.sh    安装 webssh服务
start.sh    启动 webssh服务
stop.sh    停止 webssh服务，恢复 .disabled
status.sh    查询服务运行状态，通过服务的进程pid和端口号4200
update.sh    升级webssh
uninstall.sh    卸载webssh环境和配置
autocheck.sh    单服务自检、性能监控



webssh的：
#### 1 在isgservicemonitor下启停命令：

   - 启动：echo u > /data/data/com.termux/files/usr/var/service/webssh/supervise/control
   - 停止：echo d > /data/data/com.termux/files/usr/var/service/webssh/supervise/control

#### 2 webssh的安装命令

##### 安装：

```shell
proot-distro login ubuntu << EOF
apt install -y nano shellinabox
mkdir -p /root/.homeassistant
printf "admin\nadmin" | adduser linknlink_user
usermod -s /bin/rbash linknlink_user
usermod -d /root/.homeassistant linknlink_user

mkdir -p /root/.homeassistant/bin
ln -s /usr/bin/ls /root/.homeassistant/bin/ls
ln -s /usr/bin/groups /root/.homeassistant/bin/groups
ln -s /usr/bin/whoami /root/.homeassistant/bin/whoami
ln -s /data/data/com.termux/files/usr/bin/vim /root/.homeassistant/bin/vim
echo '
# 设置 PATH 并包含用户私有 bin 目录
export PATH="/root/.homeassistant/bin:/usr/local/bin:/usr/bin:/bin"

# 锁定 PATH，防止用户修改
readonly PATH
' > /root/.homeassistant/.bash_profile

EOF

echo "========= start to construct service"

mkdir -p $PREFIX/var/service/webssh/log
touch $PREFIX/var/service/webssh/down
echo '#!/data/data/com.termux/files/usr/bin/sh
exec  proot-distro login ubuntu << EOF
shellinaboxd --no-beep --disable-ssl --port 4200 --user linknlink_user
EOF
2>&1' > $PREFIX/var/service/webssh/run
ln -sf $PREFIX/share/termux-services/svlogger $PREFIX/var/service/webssh/log/run
chmod 755 -R $PREFIX/var/service/webssh/log
chmod +x $PREFIX/var/service/webssh/run
```



##### 验证版本

```shell
proot-distro login ubuntu << EOF
  shellinaboxd --version | awk '{print $3}'
EOF
```



#### 3. 升级 webssh到最新版

```shell
proot-distro login ubuntu << EOF
  apt update
  apt install -y shellinabox
EOF
```
