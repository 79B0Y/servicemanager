参照zigbee2mqtt脚本包，设计全套mosquitto脚本包，包括：install.sh，start.sh，stop.sh，status.sh，backup.sh，restore.sh，update.sh，uninstall.sh，autocheck.sh service id: zwave-js-ui 
service id: mosquitto
脚本功能
install.sh    安装 mosquitto服务
start.sh    启动 mosquitto服务
stop.sh    停止 mosquitto服务，恢复 .disabled
status.sh    查询服务运行状态，通过服务的进程pid和端口号1883
update.sh    升级mosquitto
uninstall.sh    卸载mosquitto环境和配置
autocheck.sh    单服务自检、性能监控。读取serviceupdate.json里的"config":{},如果字段为空则使用默认配置信息，如果字段有内容且与configuration.yaml里不一致，则修改configuration.yaml内的对应内容。示例："config":{"":"","":"",}



mosquitto的：
#### 1 在isgservicemonitor下启停命令：

   - 启动：echo u > /data/data/com.termux/files/usr/var/service/mosquitto/supervise/control
   - 停止：echo d > /data/data/com.termux/files/usr/var/service/mosquitto/supervise/control

#### 2 mosquitto的安装命令

##### 安装：

```shell
pkg update & pkg install -y mosquitto
```

##### 查看 Mosquitto 版本
mosquitto -h | grep 'version' | awk '{print $3}'

##### ✅ 升级到最新版本
pkg upgrade mosquitto

##### Mosquitto 路径
/data/data/com.termux/files/usr/bin/mosquitto

参照zigbee2mqtt脚本包，设计全套mosquitto脚本包，包括：install.sh，start.sh，stop.sh，status.sh，update.sh，uninstall.sh，autocheck.sh，backup.sh, common_paths.sh, MQTT_info.md, restore.sh

service id: mosquitto

脚本基本功能描述
common_paths.sh 统一路径
install.sh    安装 mosquitto服务
start.sh    启动 mosquitto服务
stop.sh    停止 mosquitto服务，恢复 .disabled
status.sh    查询服务运行状态，通过服务的进程pid和端口号1883
update.sh    升级mosquitto
uninstall.sh    卸载mosquitto环境和配置
backup.sh    备份用户数据
restore.sh   还原用户数据
autocheck.sh    单服务自检、性能监控
MQTT_info.md    MQTT 消息列表

## mosquitto
#### 1 在isgservicemonitor下启停命令：

启动：echo u > /data/data/com.termux/files/usr/var/service/mosquitto/supervise/control
停止：echo d > /data/data/com.termux/files/usr/var/service/mosquitto/supervise/control
禁用自启动: touch /data/data/com.termux/files/usr/var/service/mosquitto/down
启用自启动: rm -f /data/data/com.termux/files/usr/var/service/mosquitto/down
#### 2 node-red的安装命令

##### 2.1 安装依赖：
proot-distro login ubuntu << EOF
source ~/.bashrc
apt update && apt upgrade -y
node -v   检查是否安装
npm -v   检查是否安装
pnpm -v   检查是否安装
如果没有安装，
apt install -y nodejs
apt install -y npm
npm install -g pnpm
EOF

##### 2.2 安装服务：

proot-distro login ubuntu << EOF
source ~/.bashrc
mkdir -p /opt/node-red
cd /opt/node-red
pnpm add node-red@4.0.9

# 生成 package.json 便于后续直接 pnpm start
echo '{
  "scripts": {
    "start": "node-red"
  },
  "dependencies": {
    "node-red": "4.0.9"  # 4.0.9 为安装版本号
  }
}' > package.json
EOF

##### 2.3 注册servicemonitor服务看护：
mkdir -p "/data/data/com.termux/files/usr/var/service/node-red/"
echo '#!/data/data/com.termux/files/usr/bin/sh
exec proot-distro login ubuntu << EOF
npm --prefix /opt/node-red/ start
EOF
2>&1
'> "/data/data/com.termux/files/usr/var/service/node-red/run"
# 禁用自启动:
touch /data/data/com.termux/files/usr/var/service/node-red/down
chmod +x /data/data/com.termux/files/usr/var/service/node-red/run

##### 2.4 验证版本

```shell
proot-distro login ubuntu << EOF 2>/dev/null
cat /opt/node-red/package.json | grep '"node-red"' | grep -v "start" | sed -E 's/.*"node-red": *"([^"]+)".*/\1/'
EOF
#### 3. node-red 升级命令 

proot-distro login ubuntu << EOF
  cd /opt/node-red
  pnpm up node-red@4.0.9   # 4.0.9 为升级版本号
EOF
