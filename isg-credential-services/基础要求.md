参照matter-server脚本包，进行isg-credential-services服务管理脚本包设计，分别设计和创建每个脚本文件，以下是基本要求：


# isg-credential-services 服务管理脚本包设计

**Service ID:** `isg-credential-services`


## 脚本文件清单及功能说明

| 脚本名               | 功能描述                          |
| ----------------- | ----------------------------- |
| `common_paths.sh` | 统一路径定义                        |
| `install.sh`      | 安装 isg-credential-services 服务                |
| `start.sh`        | 启动 isg-credential-services 服务                |
| `stop.sh`         | 停止 isg-credential-services 服务，恢复 `.disabled` |
| `status.sh`       | 查询服务运行状态，依据 PID 和 3000 端口     |
| `update.sh`       | 升级 isg-credential-services                   |
| `uninstall.sh`    | 卸载 isg-credential-services 环境及配置             |
| `autocheck.sh`    | 单服务自检与性能监控                    |


## 操作命令及管理规范

### 1. 在 `isgservicemonitor` 下启停命令
| 操作    | 命令                                                                                |
| ----- | --------------------------------------------------------------------------------- |
| 启动    | `echo u > /data/data/com.termux/files/usr/var/service/isg-credential-services/supervise/control` |
| 停止    | `echo d > /data/data/com.termux/files/usr/var/service/isg-credential-services/supervise/control` |
| 禁用自启动 | `touch /data/data/com.termux/files/usr/var/service/isg-credential-services/down`                 |
| 启用自启动 | `rm -f /data/data/com.termux/files/usr/var/service/isg-credential-services/down`                 |

#### 2 安装服务
### ⬆️ 安装 isg-credential-services

```bash
if ! proot-distro login "$PROOT_DISTRO" -- bash -c "
    cd /root
    apt update
    apt install -y python3-numpy python3-sklearn python3-requests
    rm -rf isg-credential-services
    wget --no-check-certificate https://eucfg.linklinkiot.com/isg/credential-services.zip
    unzip credential-services.zip
    rm credential-services.zip
    mv credential-services isg-credential-services
    cd isg-credential-services
    npm install
"; then
    log "failed to install isg-credential-services"
    mqtt_report "isg/install/$SERVICE_ID/status" "{\"status\":\"failed\",\"message\":\"isg-credential-services installation failed\",\"timestamp\":$(date +%s)}"
    record_install_history "FAILED" "unknown"
    exit 1
fi
```

---
### ⬆️ 获取版本

```bash
get_current_version() {
    proot-distro login "$PROOT_DISTRO" -- bash -c '
        cd isg-credential-services
        bash manage-service.sh version
        fi
    ' 2>/dev/null || echo "unknown"
}
```
---

### 注册 servicemonitor 服务看护

```bash
# -----------------------------------------------------------------------------
# 注册 servicemonitor 服务看护
# -----------------------------------------------------------------------------
log "registering servicemonitor service"
mqtt_report "isg/install/$SERVICE_ID/status" "{\"status\":\"installing\",\"message\":\"registering servicemonitor service\",\"timestamp\":$(date +%s)}"

# 创建服务目录
mkdir -p "$SERVICE_CONTROL_DIR"

# 写入 run 启动脚本
cat << 'EOF' > "$RUN_FILE"
#!/data/data/com.termux/files/usr/bin/sh
# 启动 isg-credential-services
exec proot-distro login ubuntu -- bash -c '
    cd isg-credential-services
    npm start
'
EOF

# 赋予执行权限
chmod +x "$RUN_FILE"

# 创建 down 文件（初始状态不自启）
touch "$DOWN_FILE"
```

### 4. MQTT上报
BASE_DIR="/data/data/com.termux/files/home/servicemanager"
CONFIG_FILE="$BASE_DIR/configuration.yaml"
MQTT broker信息来自于CONFIG_FILE里的mqtt

---

### 5. 路径定义
common_paths.sh 仅仅是统一路径定义的规范
不要加载统一路径定义，每个脚本使用独立参数，无需依赖common_paths.sh

### 6. autocheck要求
配置信息通过./manage-service.sh version，这个命令会显示：
服务名称
版本号
描述
Node.js 版本
NPM 版本
安装路径
服务状态（运行中/未运行）
服务端口和访问地址

### 7. 状态查询要求
bash status.sh, 只输出running/stopped
通过./manage-service.sh version来确定程序是否安装，增加mqtt状态上报，install：true/false
bash status.sh --json 输出详细json内容

### 8. 升级命令
升级前先检查版本，如果当前版本比需要升级的版本新，则skip升级，升级命令和安装命令一样

### 9. 其它要求
关键步骤加上中文注释
Termux 专用的临时目录：
  - TERMUX_TMP_DIR="/data/data/com.termux/files/usr/tmp"
  - TEMP_DIR="$TERMUX_TMP_DIR/${SERVICE_ID}_temp"
