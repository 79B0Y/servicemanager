
## 操作命令及管理规范

### 1. 在 `isgservicemonitor` 下启停命令

| ----- | --------------------------------------------------------------------------------- |
| 启动    | `echo u > /data/data/com.termux/files/usr/var/service/matter-server/supervise/control` |
| 停止    | `echo d > /data/data/com.termux/files/usr/var/service/matter-server/supervise/control` |
| 禁用自启动 | `touch /data/data/com.termux/files/usr/var/service/matter-server/down`                 |
| 启用自启动 | `rm -f /data/data/com.termux/files/usr/var/service/matter-server/down`                 |





### 注册 servicemonitor 服务看护

```bash
SERVICE_CONTROL_DIR="/data/data/com.termux/files/usr/var/service/$SERVICE_ID"   # service monitor 路径
RUN_FILE="$SERVICE_CONTROL_DIR/run"   # run 文件路径
DOWN_FILE="$SERVICE_CONTROL_DIR/down"   # down 文件路径

mkdir -p "$SERVICE_CONTROL_DIR"   # 确保 service monitor 目录存在

cat << 'EOF' > "$RUN_FILE"
#!/data/data/com.termux/files/usr/bin/sh 
export PROCESS_TAG="$PROCESS_TAG"
exec proot-distro login ubuntu << EOF
cd /opt/matter-server/
source venv/bin/activate
matter-server
EOF
2>&1
EOF

chmod +x "$RUN_FILE"   # 赋予 run 文件执行权限

touch "$DOWN_FILE"   # 创建 down 文件，禁用服务的自动启动
echo "✅ run 和 down 文件已生成: $RUN_FILE, $DOWN_FILE"   # 提示 run 与 down 文件生成成功
```
